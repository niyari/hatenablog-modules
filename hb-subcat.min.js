/*
 HatenaBlog SubCategory (c) 2015 Pocket Systems. | psn.hatenablog.jp
 (・ω・) where to go? https://www.youtube.com/watch?v=nbeGeXgjh9Q
*/
(function(){function h(d){if(!1!==d instanceof Array){for(var b=0;b<d.length;b++)switch(d[b][0]){case "setting":k=d[b][1]}if("undefined"!==typeof k.pattern)for(l=new RegExp("^"+k.pattern+"(?:.+) \\(([0-9]+)\\)"),b=document.createElement("link"),b.href="//niyari.github.io/hatenablog-modules/css/hb-subcat.css",b.rel="stylesheet",b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b),d=document.querySelectorAll(".hatena-module-category .hatena-urllist"),b=0;b<d.length;b++){var g=d[b];
if("done"!=g.dataset.categoryProcessed){g.dataset.categoryProcessed="done";for(var e=g.querySelectorAll("li"),f={},c=0;c<e.length;c++){var a=e[c].innerText.match(l);if(null!==a){if("undefined"===typeof f[a[1]]){$(e[c]).before('<li class="js-category-parent js-category-'+a[1]+'"><div class="archive-module-button js-category-toggle" data-category-name="'+a[1]+'"><span class="js-category-parent-hide-button" data-category-name="'+a[1]+'">\u25bc</span><span class="js-category-parent-show-button" data-category-name="'+
a[1]+'">\u25b6</span></div><span data-parent-category-name="'+a[1]+'">'+a[1]+'</span><ul class="js-category-child js-category-child-'+a[1]+'"></ul></li>');var h=g.querySelector("ul .js-category-child-"+a[1]);m(g.querySelector('.js-category-toggle[data-category-name="'+a[1]+'"]'));f[a[1]]={count:0}}f[a[1]].count+=~~a[2];h.appendChild(e[c])}}c=void 0;for(c in f)e=g.querySelector('span[data-parent-category-name="'+c+'"]'),e.innerText=c+" ("+f[c].count+")",1==f[c].count&&(e.parentElement.dataset.categoryDisplay=
"block",e.parentElement.classList.add("js-category-child-show"))}}}}function m(d){d.addEventListener("click",function(b){"block"==this.parentElement.dataset.categoryDisplay?(this.parentElement.dataset.categoryDisplay="none",this.parentElement.classList.remove("js-category-child-show")):(this.parentElement.dataset.categoryDisplay="block",this.parentElement.classList.add("js-category-child-show"))},!1)}var k,l;"uninitialized"==document.readyState||"loading"==document.readyState?window.addEventListener("DOMContentLoaded",
function(){h(Htnpsne.SubCategory.q)},!1):h(Htnpsne.SubCategory.q)})();