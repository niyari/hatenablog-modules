/* HatenaBlog SideMenu (c) 2015 Pocket Systems. | psn.hatenablog.jp */
/* (「・ω・)／　Alright, let's conquer the world! DaDaDa! https://www.youtube.com/watch?v=jcIOg_m-bp4 */
(function(){function m(){"block"===g.style.display?k():(g.style.display="block",e=document.body.scrollTop,document.getElementById("container").style.top=~~(0-e)+"px",h.className="menu-open")}function k(){g.style.display="none";h.className="";document.getElementById("container").style.top="";window.scrollTo(0,e)}function n(a){var c;switch(a){case "subscribe":a=b.subscribeUrl;c='&nbsp;<i class="blogicon-subscribe lg"></i>&nbsp;\u8aad\u8005\u306b\u306a\u308b';break;case "facebook":a="https://www.facebook.com/sharer/sharer.php?u="+
b.urlEncodedPermaLink;c='<i class="sideicon-facebook-squared"></i>facebook\u3067\u30b7\u30a7\u30a2';break;case "googleplus":a="https://plus.google.com/share?url="+b.urlEncodedPermaLink;c='<i class="sideicon-gplus-squared"></i>google +1';break;case "twitter":a="https://twitter.com/intent/tweet?url="+b.urlEncodedPermaLink+"&text="+b.entryTitle;c='<i class="sideicon-twitter-squared"></i>\u30c4\u30a4\u30fc\u30c8\u3059\u308b';break;case "hatebu":a="http://b.hatena.ne.jp/entry/"+b.urlEncodedPermaLink;c=
'&nbsp;<i class="blogicon-bookmark lg"></i>&nbsp;\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af';break;case "pocket":a="http://getpocket.com/edit?url="+b.urlEncodedPermaLink+"&title="+b.entryTitle;c='<i class="sideicon-pocket"></i>Pocket\u306b\u9001\u308b';break;case "feedly":a="http://cloud.feedly.com/#subscription%2Ffeed%2F"+b.baseURI+"/feed";c='&nbsp;<i class="blogicon-rss lg"></i>&nbsp;feedly\u306b\u9001\u308b';break;case "feed":a=b.baseURI+"/feed";c='&nbsp;<i class="blogicon-rss lg"></i>&nbsp;RSS';
break;default:a=b.baseURI,c="TOP\u30da\u30fc\u30b8\u3078"}var d=document.createElement("li");d.className="urllist-item";d.innerHTML='<div class="urllist-title-link"><a href="'+a+'" target="_blank">'+c+"</a></div>";return d}function p(){b.baseURI=document.querySelector("html").getAttribute("data-blogs-uri-base");b.blogAuthor=document.querySelector("html").getAttribute("data-author");b.permaLink=b.baseURI+location.pathname;b.blogName=document.getElementById("title").textContent.replace(/\s+/g,"");b.entryTitle=
document.title;b.urlEncodedentryTitle=encodeURIComponent(b.title);b.urlEncodedPermaLink=encodeURIComponent(b.permaLink);b.subscribeUrl="http://blog.hatena.ne.jp/"+b.blogAuthor+"/"+location.host+"/subscribe";Hatena.Diary.Pages.message("init",function(a){void 0!==a&&(b.can_open_editor=a.can_open_editor,b.editable=a.editable,b.subscribe=a.subscribe,b.subscribeUrl=a.subscribe_url,b.subscribes=a.subscribes)})}function l(a){var c=document.createElement("link");c.href=a;c.rel="stylesheet";c.type="text/css";
document.getElementsByTagName("head")[0].appendChild(c)}function q(){$.ajax({url:b.baseURI+"/feed",async:!0,cache:!1,dataType:"xml"}).done(function(a){var c=document.createElement("ul");c.className="hatena-urllist";$(a).find("entry").each(function(a){if(4<a)return!1;a=document.createElement("li");var b=document.createElement("div"),f=document.createElement("a");a.className="urllist-item";f.className="urllist-title-link";b.className="urllist-entry-body";f.textContent=$("title",this).text();""==f.innerHTML&&
(f.innerHTML="\u25a0");f.href=$(this).find("link").attr("href");a.appendChild(f);b.textContent=$("summary",this).text();a.appendChild(b);c.appendChild(a)});$("#js-psne-newentry").append(c)})}function r(a){$.ajax({url:b.baseURI+"/entries_access_ranking_module",data:"count=5&display_entry_category=0&display_entry_image=0&display_entry_image_size_width=50&display_entry_image_size_height=50&display_entry_body_length=50&display_entry_date=0&display_bookmark_count=0&source="+a,async:!0,cache:!1,dataType:"html"}).done(function(a){$("#js-psne-hotentry").append(a)})}
function t(){var a=window.navigator.userAgent.toLowerCase();if(/android 2./.test(a)){var b=document.getElementById("psne-side-menu");b.addEventListener("touchstart",function(a){b.pageY=a.changedTouches[0].pageY;b.top1=b.scrollTop},!1);b.addEventListener("touchmove",function(a){b.top2=b.pageY-a.changedTouches[0].pageY;b.scrollTop=b.top1+b.top2;0!==b.top2&&(a.preventDefault(),a.stopPropagation())},!1);b.addEventListener("touchend",function(a){},!1)}}var h,g,e,b={};window.addEventListener("DOMContentLoaded",
function(){if("touch"===document.querySelector("html").getAttribute("data-globalheader-type")){p();l("//niyari.github.io/hatenablog-modules/css/sidemenu.css");l("//niyari.github.io/hatenablog-modules/css/htnshare-embedded.css");var a=document.createElement("div");a.id="psne-side-menu-overlay-container";a.innerHTML='<div id="psne-side-menu-button"><i class="sideicon-menu"></i></div><div id="psne-side-menu-overlay"></div>';document.body.appendChild(a);a=document.createElement("ul");a.id="psne-side-menu";
a.innerHTML='<li><div id="psne-side-menu-top"></div></li><li><div id="js-blog-title">'+b.blogName+'</div></li><li><div id="js-psne-newentry" class="side-menu-container"><div class="side-menu-container-title">\u65b0\u7740\u30a8\u30f3\u30c8\u30ea\u30fc</div></div></li><li><div id="js-psne-hotentry" class="side-menu-container"><div class="side-menu-container-title">\u4eba\u6c17\u30a8\u30f3\u30c8\u30ea\u30fc</div></div></li><li><div class="side-menu-container"><div class="side-menu-container-title">\u3053\u3061\u3089\u3082\u3069\u3046\u305e</div><ul id="js-psne-menulist"></ul></div></li><li ><div id="psne-sidemenu-end"><a href="http://psn.hatenablog.jp/entry/discover-hatena" target="_blank">:)</a></div></li>';
document.body.appendChild(a);var a=Htnpsne.SideMenu.q,c=document.getElementById("js-psne-menulist");!1===a instanceof Array&&(a=[],a.push("create subscribe facebook googleplus twitter hatebu pocket feedly".split(" ")));for(var d=0;d<a.length;d++)switch(a[d][0]){case "create":for(var e=1;e<a[d].length;e++)c.appendChild(n(a[d][e]))}a=document.getElementById("psne-side-menu-button");h=document.getElementsByTagName("html")[0];document.getElementById("psne-side-menu-overlay-container");g=document.getElementById("psne-side-menu-overlay");
document.getElementById("psne-side-menu");a.addEventListener("click",m,!1);g.addEventListener("click",k,!1);q();r("access");t()}},!1)})();