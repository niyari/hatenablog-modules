/*
 HatenaBlog Also read (c) 2017 Pocket Systems. | MIT | psn.hatenablog.jp/entry/also-read
 (・ω・) where to go? https://www.youtube.com/watch?v=nbeGeXgjh9Q
 Htnpsne.API.ts v1.0.4 (c) 2017 Pocket Systems. | MIT | psn.hatenablog.jp
 (「・ω・)「 Moment of the frame, in slow motion https://www.youtube.com/watch?v=HM63o4UlUPU
*/
var Htnpsne;
(function(d){(function(d){var m;function r(){var a=document.createElement("script");a.async=!0;a.src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(a,e);m=!0}d.version="1.0.4";var t=document.getElementsByTagName("head")[0];m=!1;d.htmlTagData=document.getElementsByTagName("html")[0].dataset;"undefined"===typeof d.htmlTagData&&console.log("if you'd like to use many of our latest and greatest features, please upgrade to a modern, fully supported browser. :)");d.setupCSS=
function(a){var e=document.createElement("link");e.href=a;e.rel="stylesheet";e.type="text/css";t.appendChild(e)};d.listShuffle=function(a,e){var d=e||Math.random;a=a.slice();for(var f=a.length-1;0<f;f--){var m=Math.floor(d()*(f+1)),p=a[f];a[f]=a[m];a[m]=p}return a};d.escapeHtml=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};d.makeHtmlGoogAds=function(a,d){void 0===d&&(d=!0);if("undefined"===typeof a.client||null===
a.client||""===a.client){if(d)return document.createElement("ins").setAttribute("data-ad-error","error")}else if("undefined"===typeof a.slot||null==a.slot||""===a.slot){if(d)return document.createElement("ins").setAttribute("data-ad-error","error")}else{m||r();if("undefined"===typeof a.className||null===a.className)a.className="";if("undefined"===typeof a.style||null===a.style||a.style==={})a.style.display="block";if("undefined"===typeof a.format||null===a.format)a.format="auto";var e=document.createElement("ins");
e.className="adsbygoogle "+a.className;e.setAttribute("data-ad-client",a.client);e.setAttribute("data-ad-slot",a.slot);e.setAttribute("data-ad-format",a.format);Object.keys(a.style).map(function(d){return e.style[d]=a.style[d]});return!1===d?e.outerHTML:e}};d.hatenaProfileIconURL=function(a,d){void 0===a&&(a="my");return d?"http://n.hatena.ne.jp/"+a+"/profile/image?type=icon&size="+d:"http://n.hatena.ne.jp/"+a+"/profile/image?type=icon"};d.hasCategory=function(a){void 0===a&&(a="");a=a.replace(/\s/g,
"-");return"entry"!==document.getElementsByTagName("html")[0].getAttribute("data-page")||""===a?!1:0<=document.getElementsByTagName("body")[0].className.split(" ").indexOf("category-"+a)}})(d.API||(d.API={}))})(Htnpsne||(Htnpsne={}));
(function(d){(function(x){function m(b,c){var q=[];$.ajax({dataType:"xml",url:c}).done(function(c,k,h){$(c).find("item").each(function(){!1!==/^\/entry/.test(location.pathname)&&location.origin+location.pathname===$(this).find("link").text()||q.push({title:$(this).find("title").text(),link:$(this).find("link").text()})});a(b,q)}).fail(function(c,q,h){a(b,[{title:"(\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u518d\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044)",
link:f}])})}function r(b,c){var q=[];$.ajax({dataType:"jsonp",url:"http://b.hatena.ne.jp/entrylist/json",data:{sort:"count",url:c}}).done(function(c,k,h){for(k=0;k<c.length;k++)!0===/\/entry\//.test(c[k].link)&&location.origin+location.pathname!==c[k].link?q.push({title:c[k].title,count:c[k].count,link:c[k].link}):console.log("\u5bfe\u8c61\u306e\u30da\u30fc\u30b8\u3092\u9664\u5916\u3057\u307e\u3057\u305f\u3002(B!)");a(b,q)}).fail(function(c,q,h){a(b,[{title:"(\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u518d\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3063\u3066\u304f\u3060\u3055\u3044)",
link:f}])})}function t(){for(var b=[],c=f.split("://")[1],a=document.querySelectorAll("body.page-entry div.categories a"),l=0;l<a.length;l++){var k=a[l],h=k.href.split(c+"/archive/category/")[1];"undefined"!==typeof k&&b.push(h)}p=b;b=document.querySelectorAll(".js-htnpsne-awasete-module");for(c=0;c<b.length;c++)a=b[c],"true"===a.dataset.userCss&&(u=!1),"true"===a.dataset.disableModuleExecuteTest&&(v=!0),l=a.dataset.mode,0===p.length?l=d.API.listShuffle(["Recent","Popular"])[0]:p=d.API.listShuffle(p),
"Popular"===l?(e(a,Math.random().toString(36).slice(6),"Popular"),r(a.dataset.targetId,f)):"Recent"===l?(e(a,Math.random().toString(36).slice(6),"Recent"),m(a.dataset.targetId,f+"/rss")):(e(a,Math.random().toString(36).slice(6),p[0]),m(a.dataset.targetId,f+"/rss/category/"+p[0])),$("#Htn-psne-Awasete-Link-"+a.dataset.targetId).tipsy({opacity:1,gravity:"s"});w();u&&(b=document.createElement("link"),b.href="//niyari.github.io/hatenablog-modules/css/also-read.min.css",b.rel="stylesheet",b.type="text/css",
document.getElementsByTagName("head")[0].appendChild(b));"about"===d.API.htmlTagData.page&&!0===v&&(null==document.getElementById("Htnpsne-about-elem")&&(null!=document.querySelector(".about-subscription-count")?(b=document.querySelectorAll("div.entry-content dt"),b=b[b.length-1],c=document.createElement("dt"),c.innerText="\u30d6\u30ed\u30b0\u62e1\u5f35\u6a5f\u80fd",b.parentNode.insertBefore(c,b),c=document.createElement("dd"),c.id="Htnpsne-about-elem",b.parentNode.insertBefore(c,b)):(b=document.querySelectorAll("div.entry-content dd"),
0===b.length?(c=document.createElement("div"),b=document.querySelector("div.entry-content"),b.appendChild(c),b=c):b=b[b.length-1],c=document.createElement("dt"),c.textContent="\u30d6\u30ed\u30b0\u62e1\u5f35\u6a5f\u80fd",b.parentNode.appendChild(c),c=document.createElement("dd"),c.id="Htnpsne-about-elem",b.parentNode.appendChild(c))),b=document.getElementById("Htnpsne-about-elem"),c=document.createElement("div"),c.innerHTML='<a href="http://psn.hatenablog.jp/entry/also-read" target="_blank">Also read(\u306f\u3066\u306a\u30d6\u30ed\u30b0 \u3042\u308f\u305b\u3066\u8aad\u307f\u305f\u3044) \u3092\u5229\u7528\u4e2d\u3067\u3059\u3002</a>',
b.appendChild(c))}function a(a,c){var b=document.querySelector('.js-htnpsne-awasete-entrys[data-target-id="'+a+'"]'),l=parseInt(b.dataset.count,10),k="undefined"===typeof b.dataset.trackParameters?"":b.dataset.trackParameters,h="undefined"===typeof b.dataset.listType?"":b.dataset.listType,e="undefined"===typeof b.dataset.displayBookmark_count?"false":b.dataset.displayBookmark_count;b.innerHTML="";0===c.length&&(c=[{link:f,title:"\u30d6\u30ed\u30b0TOP\u3078"}]);c=d.API.listShuffle(c);l>c.length?l=
c.length:0===l&&(l=3);if("list"===h){for(var n=document.createElement("ul"),h=function(b){var a=document.createElement("li"),h=document.createElement("a");h.href=c[b].link+k;h.textContent=c[b].title;"true"===e&&h.appendChild(function(){var a=document.createElement("img");a.src="http://b.st-hatena.com/entry/image/"+c[b].link;a.className="bookmark-count";a.alt="Hatena Bookmark - "+h.textContent;return a}());a.appendChild(h);n.appendChild(a)},g=0;g<l;g++)h(g);b.appendChild(n)}else for(g=0;g<l;g++)n=
document.createElement("iframe"),n.className="embed-card embed-blogcard js-htnpsne-awasete-embed-blogcard",n.style.display="block",n.style.width="100%",n.frameBorder="0",n.scrolling="no",n.title=c[g].title,n.src="http://hatenablog-parts.com/embed?url="+encodeURIComponent(c[g].link+k),b.appendChild(n)}function e(a,c,d){var b=document.createElement("div");b.dataset.targetId=c;a.dataset.targetId=c;var k="undefined"===typeof a.dataset.title||""===a.dataset.title?"\u3042\u308f\u305b\u3066\u8aad\u307f\u305f\u3044":
a.dataset.title,h=document.createElement("aside"),f=document.createElement("h1");f.className="js-htnpsne-awasete-control-outer";f.appendChild(function(){var a=document.createElement("span");a.className="js-htnpsne-awasete-title";a.textContent=k;return a}());var e=function(){var a=document.createElement("span");a.className="js-htnpsne-awasete-control";var b=document.createElement("a");b.href="http://psn.hatenablog.jp/entry/also-read";b.id="Htn-psne-Awasete-Link-"+c;b.title="\u3053\u306e\u6a5f\u80fd\u306f\u4f55\uff1f";
b.target="_blank";b.innerHTML='<i class="blogicon-help"></i>';a.appendChild(b);return a}();f.appendChild(e);var g=function(){var a=document.createElement("select");a.className="js-htnpsne-awasete-select";a.dataset.targetId=c;var b=document.createElement("option");b.textContent="\u4eba\u6c17\u30a8\u30f3\u30c8\u30ea\u30fc";b.dataset.command="Popular";b.value="";"Popular"===d&&(b.selected=!0,d="");a.appendChild(b);b=document.createElement("option");b.textContent="\u65b0\u7740\u30a8\u30f3\u30c8\u30ea\u30fc";
b.dataset.command="Recent";b.value="";"Recent"===d&&(b.selected=!0,d="");a.appendChild(b);for(var b=function(a,b){var c=document.createElement("option");c.value=a;c.textContent=decodeURIComponent(a);a===b&&(c.selected=!0);return c},h=0;h<p.length;h++)a.appendChild(b(p[h],d));return a}();e.appendChild(g);g=document.createElement("button");g.className="js-htnpsne-awasete-btn-reload";g.dataset.targetId=c;g.innerHTML='<i class="blogicon-repeat"></i><span></span>';e.appendChild(g);"true"===a.dataset.moreBtn&&
(g=document.createElement("button"),g.className="js-htnpsne-awasete-btn-readmore",g.dataset.targetId=c,g.innerHTML='<i class="blogicon-list"></i><span></span>',e.appendChild(g));"true"===a.dataset.subscribeBtn&&(g=document.createElement("button"),g.className="js-htnpsne-awasete-btn-subscribe",g.dataset.targetId=c,g.innerHTML='<i class="blogicon-subscribe"></i><span></span>',e.appendChild(g));e=function(){var b=document.createElement("div");b.className="js-htnpsne-awasete-entrys";b.dataset.targetId=
c;b.dataset.count=Math.abs(1*a.dataset.count);b.textContent=" :) ";"undefined"!==typeof a.dataset.trackParameters&&(b.dataset.trackParameters=a.dataset.trackParameters);"undefined"!==typeof a.dataset.listType&&(b.dataset.listType=a.dataset.listType);"undefined"!==typeof a.dataset.displayBookmark_count&&(b.dataset.displayBookmark_count=a.dataset.displayBookmark_count);return b}();h.appendChild(f);h.appendChild(e);b.appendChild(h);a.appendChild(b)}function w(){for(var a=document.querySelectorAll(".js-htnpsne-awasete-select"),
c=function(b){var c=a[b];"true"!==c.dataset.listen&&(c.dataset.listen="true",c.addEventListener("change",function(){var a=c.dataset.targetId;if(""!==c.value)m(a,f+"/rss/category/"+c.value);else{var b=document.querySelector('select[data-target-id="'+a+'"]');"Popular"===b[b.selectedIndex].dataset.command?r(a,f):m(a,f+"/rss")}},!1))},d=0;d<a.length;d++)c(d);a=document.querySelectorAll(".js-htnpsne-awasete-btn-reload");c=function(b){var c=a[b];"true"!==c.dataset.listen&&(c.dataset.listen="true",c.addEventListener("click",
function(){var a=c.dataset.targetId,b=document.querySelector('select[data-target-id="'+a+'"]');""!==b.value?m(a,f+"/rss/category/"+b.value):"Popular"===b[b.selectedIndex].dataset.command?r(a,f):m(a,f+"/rss")},!1))};for(d=0;d<a.length;d++)c(d);a=document.querySelectorAll(".js-htnpsne-awasete-btn-readmore");c=function(b){var c=a[b];"true"!==c.dataset.listen&&(c.dataset.listen="true",c.addEventListener("click",function(){var a=document.querySelector('select[data-target-id="'+c.dataset.targetId+'"]'),
a=""!==a.value?f+"/archive/category/"+a.value:"Popular"===a[a.selectedIndex].dataset.command?"http://b.hatena.ne.jp/entrylist?sort=count&url="+encodeURIComponent(f):f+"/archive";window.open(a)},!1))};for(d=0;d<a.length;d++)c(d);a=document.querySelectorAll(".js-htnpsne-awasete-btn-subscribe");c=function(b){var c=a[b];"true"!==c.dataset.listen&&(c.dataset.listen="true",c.addEventListener("click",function(){var a=document.querySelector('select[data-target-id="'+c.dataset.targetId+'"]'),a=""!==a.value?
f+"/rss/category/"+a.value:"Popular"===a[a.selectedIndex].dataset.command?"http://b.hatena.ne.jp/entrylist?sort=count&mode=rss&url="+encodeURIComponent(f):f+"/feed";window.open("http://cloud.feedly.com/#subscription%2Ffeed%2F"+encodeURIComponent(a))},!1))};for(d=0;d<a.length;d++)c(d)}var f=d.API.htmlTagData.blogsUriBase,u=!0,p=[],v=!1;"uninitialized"===document.readyState||"loading"===document.readyState?window.addEventListener("DOMContentLoaded",function(){t()},!1):t()})(d.Alsoread||(d.Alsoread=
{}))})(Htnpsne||(Htnpsne={}));